<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./css/bootstrap.css" rel="stylesheet" media="screen">
    <script
            src="https://code.jquery.com/jquery-2.2.4.min.js"
            integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
            crossorigin="anonymous"></script>
    <script src="./js/bootstrap.js"></script>
    <script src="./js/bootstrap-treeview.min.js"></script>
    <title>Title</title>
    <script>
        function getGitTree(contentURL) {
            let data = null;
            $.ajax({
                url: contentURL,
                headers: {Authorization:'token ' + '3646292e23cc66903872860a07218cd0f0cb130c'},
                type: "GET",
                async: false,
                success: function(result) {
                    let fileTree = [];
                    result.forEach(function(item) {
                        if (item['type'] === 'dir')
                            fileTree.push({text: item['name'], state: {expanded: false}, nodes: getGitTree(item['url'])});
                        else {
                            if (item['download_url'] !== null && item['type'] === 'file')
                                fileTree.push({text: item['name'], href: item['download_url']})
                            else
                                fileTree.push({text: item['name']})

                        }
                    });
                    data = fileTree;
                },
                error:function(error) {
                    console.log('Error ' + error)
                }
            });
            return data
        }
        function getData(datasetID) {
            const query = 'https://api.github.com/repos/OpenNeuroDatasets/'+datasetID+'/contents/';
            let gitTree = null
//             gitTree = getGitTree(query)
//             const myJSON = JSON.stringify(gitTree)
//             // create a link DOM fragment
//             var $link = $("<a />");
// // encode any special characters in the JSON
//             var text = encodeURIComponent( myJSON );
//
// // <a download="filename.txt" href='data:application/octet-stream,...'></a>
//             $link
//                 .attr( "download", "filename.txt" )
//                 .attr( "href", "data:application/octet-stream," + text )
//                 .appendTo( "body" )
//                 .get(0)
//                 .click()
            const ds002718TreeLink = 'https://raw.githubusercontent.com/dungscout96/NEMAR-dataset-viewer/master/ds002718TreeWithLinks.txt';
            $.ajax({
                url: ds002718TreeLink,
                type: "GET",
                async: false,
                success: function(result) {
                    gitTree = result;
                },
                error:function(error) {
                    console.log('Error ' + error)
                }
            });
            $('#tree').treeview({data: gitTree, showBorder: true, enableLinks: true});
        }
    </script>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <h1>Face processing EEG dataset for EEGLAB</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <div class="jumbotron">
                    <h2>README</h2>
                    <pre>Multi-subject, multi-modal (sMRI+EEG) neuroimaging dataset
on face processing. Original data described at https://www.nature.com/articles/sdata20151
This is repackaged version of the EEG data in EEGLAB format. The data has gone through
minimal preprocessing including (see wh_extracteeg_BIDS.m):
- Ignoring fMRI and MEG data (sMRI preserved for EEG source localization)
- Extracting EEG channels out of the MEG/EEG fif data
- Adding fiducials
- Renaming EOG and EKG channels
- Extracting events from event channel
- Removing spurious events 5, 6, 7, 13, 14, 15, 17, 18 and 19
- Removing spurious event 24 for subject 3 run 4
- Renaming events taking into account button assigned to each subject
- Correcting event latencies (events have a shift of 34 ms)
- Resampling data to 250 Hz (this is a step that is done because
  this dataset is used as tutorial for EEGLAB and need to be lightweight)
- Merging run 1 to 6
- Removing event fields urevent and duration
- Filling up empty fields for events boundary and stim_file.
- Saving as EEGLAB .set format

Ramon Martinez, Dung Truong, Scott Makeig, Arnaud Delorme (UCSD, La Jolla, CA, USA)</pre>
                </div>
                <div class="jumbotron">
                    <h2>Dataset description</h2>
                    <pre>{
    "Name": "Face processing EEG dataset for EEGLAB",
    "BIDSVersion": "v1.2.0",
    "License": "CC0",
    "Authors": [
        "Daniel G. Wakeman",
        "Richard N Henson"
    ],
    "ReferencesAndLinks": [
        "Wakeman, D., Henson, R. A multi-subject, multi-modal human neuroimaging dataset. Sci Data 2, 150001 (2015). https://doi.org/10.1038/sdata.2015.1"
    ],
    "Funding": [
        "This work was supported by the UK Medical Research Council (MC_A060_5PR10) and Elekta Ltd."
    ],
    "DatasetDOI": "10.18112/openneuro.ds002718.v1.0.4"
}</pre>
                </div>
            </div>
            <div class="col-lg-6">
                <h3>File Tree Browser</h3>
                <div id="tree"></div>
            </div>
        </div>
    </div>
    <script>
        getData('ds002718');
        // $('#tree').treeview({data: getData('ds002718'), showBorder: false});
    </script>

    <script>
    </script>
</body>
</html>